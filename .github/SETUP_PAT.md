# Настройка Personal Access Token (PAT) для CI/CD

## Обязательно для работы автоматических релизов

Для корректной работы CI/CD pipeline с автоматическим созданием релизов необходимо создать Personal Access Token (PAT) и добавить его в secrets репозитория.

## Шаги по созданию PAT

### 1. Перейдите в настройки GitHub
1. Зайдите в свой профиль GitHub
2. Нажмите на иконку профиля в правом верхнем углу
3. Выберите "Settings"

### 2. Перейдите в настройки разработчика
1. В меню слева прокрутите вниз до раздела "Developer settings"
2. Нажмите "Personal access tokens" → "Tokens (classic)"

### 3. Создайте новый токен
1. Нажмите "Generate new token" → "Generate new token (classic)"
2. Заполните форму:
   - **Note**: `glping-ci-cd` (или любое описательное имя)
   - **Expiration**: Выберите срок действия (рекомендуется 90 дней или No expiration)
   - **Scopes**: Отметьте следующие галочки:
     - ✅ `repo` (полный доступ к репозиториям)
     - ✅ `workflow` (доступ к workflow)

### 4. Сгенерируйте и сохраните токен
1. Нажмите "Generate token"
2. **Сразу скопируйте токен** - он больше не будет показан!
3. Сохраните токен в надежном месте

## Добавление токена в secrets репозитория

### 1. Перейдите в настройки репозитория
1. Откройте репозиторий `glping/glping`
2. Нажмите на "Settings"
3. В меню слева выберите "Secrets and variables" → "Actions"

### 2. Добавьте новый secret
1. Нажмите "New repository secret"
2. Заполните форму:
   - **Name**: `PAT`
   - **Secret**: Вставьте скопированный токен
3. Нажмите "Add secret"

## Проверка работы

После добавления токена CI/CD pipeline должен успешно:
1. Создавать коммиты с обновлением версии
2. Push-ить изменения в репозиторий
3. Создавать Git-теги
4. Создавать GitHub релизы с артефактами

## Важно

- Токен должен иметь права на запись в репозиторий (`repo` scope)
- Если токен истекает, нужно создать новый и обновить secret
- Никогда не публикуйте токен в открытом доступе
- Используйте токен только для автоматизации CI/CD

## Альтернатива: GitHub App

Если вы предпочитаете использовать GitHub App вместо PAT:

1. Создайте GitHub App с правами на запись в репозиторий
2. Установите приложение в репозиторий
3. Сгенерируйте приватный ключ
4. Добавьте приватный ключ в secrets как `APP_PRIVATE_KEY`
5. Добавьте ID приложения как `APP_ID`

Однако для большинства случаев PAT является более простым решением.